Important:
* Figure out "on update" statements for research tables
* Check "on duplicate key" statements for other tables - does it make sense to be using viewer_id?
* make changes to ICD-10 mapping
* Check if ATC updates will require any changes (see https://www.whocc.no/filearchive/documents/atc_ddd_new_and_alterations_2021.xlsx )
* Show appropriate errors when someone attempts to access system and:
		- user has valid doctor_id but attempts to navigate to invalid patient_id
        - if the page renew fails, it should notify the user in some way
* Add back button to Lees meer page
* TODOs in prediction explanation page
* Expunge unused Prediction code
* Stubborn caching in IE means that browser must be closed and reopened to get new data to load after Vernieuwen or Verstuur (sending hand-entered prediction model data). All the headers that are supposed to control this have been added. I can't figure out anything else to try to make this work. Apparently it partly depends on browser settings; see what happens in the real deploy.
* non-medication advice categories all print out, should just the first one, other should be hidden

Mid Priority:
* Getting data out of EHR
  * Look into free FHIR servers and see if we can create a version of the ETL that can be included in the main repo
    https://confluence.hl7.org/display/FHIR/Public+Test+Servers
  * stub-etl will always succeed; 
    consider adding code which simulates a failed retrieval to test failure states
* change and rename "export-to-mrs" so that it only exports to the portal rather than attempting to be a generic solution for exporting anywhere (portal db might be a remote db, or might be another db running on the same MariaDB instance). What does it take to create a working demo (a running adfice-ace will actually export to a running valportaal)?
* change separation of labor so adfice-ace writes to the database and adfice-xxx-etl returns a JSON with the needed data rather than writing directly to the DB (move SQL code from etl to adfice-ace and have etl build a json without the SQL)
* consider removing birth date entirely from the data; we only need age
* fix testcafe acceptance tests to work with testcafe v1.16.1
* figure out why last test in "Test user entering values" (TestCafe) fails, even though performing the actions manually gives the correct result.
* figure out why TestCafe "Nonmed headers display correctly on patient page" fails
* See if we can get rid of <span> headers in nonmed advice. (I think they are not used any more.)
* Can we write any meaningful test for fivepages.js print_page()? It has one job...
* automate tests for CDSS working on IE11
* Add a way to clear user-entered prediction model data. This can be used by the TestCafe test to clean up after itself.
* Each acceptance test should start an instance of adfice-webserver
  * refactor adfice-webserver-runner to be more testable
  * refactor the client js (static/patient.js) to be more testable
* automate test reconnect behavior on web-socket drop
  (or adfice-webserver-runner restart)
* specify DB port, separate instance for local human testing, automated testing
* specify DB per-test, or otherwise ensure:
  * tests can be run in parallel
  * data mutations in one test do not impact a different test
  * ensure each test operates on separate data
* CI tests should use HTTPS too, possibly self-signed certs
* the "consult view" button could be renamed "Consult vernieuwen" in order to
  remove the items which have been un-checked/disabled
  * the students suggested using a "reload" icon instead
* record changes between views, connections and disconnects
  * see print logging
* styling, e.g.: viewers in yellow, hidden when 1
* test-cafe : get the innnerHTML out of an element
* sanity check choices of checkboxes
  * e.g.: "stop medication A" && "continue medication A"
* write a log archival script
  raise priority if this looks like it is growing too fast:

      SELECT table_name
           , table_rows
           , ROUND((data_length + index_length)/POWER(1024,2),1) AS size_mb
           , (data_length + index_length) AS size_bytes
        FROM information_schema.tables
       WHERE table_schema='adfice'
    ORDER BY size_bytes DESC;
* make black-and-white printer-friendly css

Low Priority:
* naming consistency thoughout the css
* naming consistency thoughout the javascript
* naming consistency thoughout the html
* tidy css page and make naming more consistant
* testcafe checkboxes contained in display:flex divs are not clickable
  * open a bug with a tiny reproducible example

Requested (not required) changes to rules:
* Rule 50: Split to personalize by age
* Rule 45: Split to personalize by +/- OH.
* Rule 45: Split into using enalapril/something else
* See if there is sufficient evidence to suggest mirabegron as alternative for G04BD
* See if there is sufficient evidence to suggest testerosterone 5 aplha reductase inhibitors (dutasteride) as alternative for G04CA

Important, but unable to do yet:
* Once we know something about how authentication will work, we may need to do
  something to prevent users without authentication from loading the data.
  * session expiration? browser caching? detect back button, return to page?
* Sending data to research database (right now we have some tables in our own database that mimic the research db tables)
* Users wanted a "close this tab" button on each refpage that closes the tab. However, the method that works on IE is considered bad practice, and might not work in the actual deployment environment. We can look into this in the actual deployment enviornment.

